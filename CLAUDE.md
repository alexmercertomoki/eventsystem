# Event System - é¡¹ç›®è®°å¿†

## åç«¯æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å®¢æˆ·ç«¯è¯·æ±‚                                    â”‚
â”‚                    (æµè§ˆå™¨ / Postman / å‰ç«¯åº”ç”¨)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Express Server (index.ts)                        â”‚
â”‚                      Port: 3001                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä¸­é—´ä»¶å±‚ (Middleware)                                        â”‚   â”‚
â”‚  â”‚  â€¢ CORS                                                      â”‚   â”‚
â”‚  â”‚  â€¢ express.json()                                            â”‚   â”‚
â”‚  â”‚  â€¢ express.urlencoded()                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è·¯ç”±å±‚ (Routes)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/auth (auth.routes.ts)                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ POST /login          - ç®¡ç†å‘˜ç™»å½•                         â”‚   â”‚
â”‚  â”‚  â””â”€ GET  /me             - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/admin/events (event.routes.ts) [éœ€è¦è®¤è¯]              â”‚   â”‚
â”‚  â”‚  â”œâ”€ POST   /                    - åˆ›å»ºæ´»åŠ¨                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET    /                    - è·å–æ´»åŠ¨åˆ—è¡¨                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET    /:id                 - è·å–å•ä¸ªæ´»åŠ¨                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ PUT    /:id                 - æ›´æ–°æ´»åŠ¨                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ DELETE /:id                 - åˆ é™¤æ´»åŠ¨                    â”‚   â”‚
â”‚  â”‚  â””â”€ PUT    /:id/content-blocks  - æ›´æ–°æ´»åŠ¨å†…å®¹å—               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/events (public.routes.ts) [å…¬å¼€è®¿é—®]                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET /events          - è·å–å·²å‘å¸ƒæ´»åŠ¨åˆ—è¡¨                  â”‚   â”‚
â”‚  â”‚  â””â”€ GET /events/:slug    - è·å–å·²å‘å¸ƒæ´»åŠ¨è¯¦æƒ…                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®¤è¯ä¸­é—´ä»¶ (Middleware)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  auth.middleware.ts                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ authenticate()        - éªŒè¯ JWT Token                   â”‚   â”‚
â”‚  â”‚  â””â”€ requireSuperAdmin()   - éªŒè¯è¶…çº§ç®¡ç†å‘˜æƒé™                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æœåŠ¡å±‚ (Services)                               â”‚
â”‚                    [ä¸šåŠ¡é€»è¾‘å¤„ç†]                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  auth.service.ts                                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ login()              - ç™»å½•é€»è¾‘ + JWT ç”Ÿæˆ                â”‚   â”‚
â”‚  â”‚  â”œâ”€ verifyToken()        - éªŒè¯ Token                        â”‚   â”‚
â”‚  â”‚  â””â”€ getAdminById()       - è·å–ç®¡ç†å‘˜ä¿¡æ¯                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  event.service.ts                                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ createEvent()        - åˆ›å»ºæ´»åŠ¨                           â”‚   â”‚
â”‚  â”‚  â”œâ”€ getEvents()          - è·å–æ´»åŠ¨åˆ—è¡¨                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ getEventById()       - è·å–æ´»åŠ¨è¯¦æƒ…                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ updateEvent()        - æ›´æ–°æ´»åŠ¨                           â”‚   â”‚
â”‚  â”‚  â”œâ”€ deleteEvent()        - åˆ é™¤æ´»åŠ¨                           â”‚   â”‚
â”‚  â”‚  â””â”€ updateContentBlocks() - æ›´æ–°å†…å®¹å—                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®éªŒè¯å±‚ (Validation)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  validation.ts (ä½¿ç”¨ Zod)                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ loginSchema                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ createEventSchema                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ updateEventSchema                                        â”‚   â”‚
â”‚  â”‚  â””â”€ contentBlockSchema                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ORM å±‚ (Prisma)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  prisma.ts (Prisma Client å®ä¾‹)                              â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  æä¾›çš„æ–¹æ³•:                                                   â”‚   â”‚
â”‚  â”‚  â€¢ prisma.admin.findUnique()                                 â”‚   â”‚
â”‚  â”‚  â€¢ prisma.event.create()                                     â”‚   â”‚
â”‚  â”‚  â€¢ prisma.event.findMany()                                   â”‚   â”‚
â”‚  â”‚  â€¢ prisma.contentBlock.deleteMany()                          â”‚   â”‚
â”‚  â”‚  â€¢ prisma.$transaction()                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PostgreSQL Database                               â”‚
â”‚                   (Docker Container)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ•°æ®è¡¨:                                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ admins            (ç®¡ç†å‘˜è¡¨)                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ events            (æ´»åŠ¨è¡¨)                                â”‚   â”‚
â”‚  â”‚  â””â”€ content_blocks    (å†…å®¹å—è¡¨)                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ–‡ä»¶ç»“æ„è¯¦è§£

```
packages/server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # ğŸš€ åº”ç”¨å…¥å£ - Express æœåŠ¡å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                        # ğŸ“š æ ¸å¿ƒåº“
â”‚   â”‚   â””â”€â”€ prisma.ts              # Prisma Client å•ä¾‹
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                      # ğŸ“ TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts               # AuthRequest, JWTPayload, ApiResponse
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/                 # ğŸ›¡ï¸ ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.middleware.ts     # JWT è®¤è¯ã€æƒé™éªŒè¯
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                     # ğŸ›¤ï¸ è·¯ç”±æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ auth.routes.ts         # è®¤è¯è·¯ç”± (/api/auth)
â”‚   â”‚   â”œâ”€â”€ event.routes.ts        # ç®¡ç†å‘˜æ´»åŠ¨è·¯ç”± (/api/admin/events)
â”‚   â”‚   â””â”€â”€ public.routes.ts       # å…¬å¼€è·¯ç”± (/api/events)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                   # ğŸ’¼ ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ auth.service.ts        # è®¤è¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ event.service.ts       # æ´»åŠ¨æœåŠ¡
â”‚   â”‚
â”‚   â””â”€â”€ utils/                      # ğŸ”§ å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ validation.ts          # Zod éªŒè¯ Schema
â”‚
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma              # ğŸ“Š æ•°æ®åº“ Schema å®šä¹‰
â”‚   â””â”€â”€ seed.ts                    # ğŸŒ± ç§å­æ•°æ®è„šæœ¬
â”‚
â””â”€â”€ tests/                         # ğŸ§ª æµ‹è¯•æ–‡ä»¶
```

---

## è¯·æ±‚æµç¨‹ç¤ºä¾‹

### ç¤ºä¾‹ 1: ç®¡ç†å‘˜ç™»å½•

```
1. POST /api/auth/login
   Body: { email: "admin@eventsystem.com", password: "admin123" }

2. auth.routes.ts æ¥æ”¶è¯·æ±‚
   â”œâ”€ ä½¿ç”¨ loginSchema éªŒè¯æ•°æ®
   â””â”€ è°ƒç”¨ authService.login()

3. auth.service.ts å¤„ç†ç™»å½•
   â”œâ”€ é€šè¿‡ prisma.admin.findUnique() æŸ¥æ‰¾ç”¨æˆ·
   â”œâ”€ ä½¿ç”¨ bcrypt.compare() éªŒè¯å¯†ç 
   â”œâ”€ ä½¿ç”¨ jwt.sign() ç”Ÿæˆ Token
   â””â”€ è¿”å› { token, admin }

4. è¿”å›ç»™å®¢æˆ·ç«¯
   { success: true, data: { token: "eyJ...", admin: {...} } }
```

### ç¤ºä¾‹ 2: åˆ›å»ºæ´»åŠ¨ï¼ˆéœ€è¦è®¤è¯ï¼‰

```
1. POST /api/admin/events
   Headers: { Authorization: "Bearer eyJ..." }
   Body: { title: "æ–°æ´»åŠ¨", slug: "new-event", ... }

2. ç»è¿‡ authenticate ä¸­é—´ä»¶
   â”œâ”€ æå– Token
   â”œâ”€ authService.verifyToken() éªŒè¯
   â”œâ”€ æŸ¥æ‰¾ç®¡ç†å‘˜ prisma.admin.findUnique()
   â””â”€ å°† admin é™„åŠ åˆ° req.admin

3. event.routes.ts æ¥æ”¶è¯·æ±‚
   â”œâ”€ ä½¿ç”¨ createEventSchema éªŒè¯æ•°æ®
   â””â”€ è°ƒç”¨ eventService.createEvent()

4. event.service.ts å¤„ç†åˆ›å»º
   â”œâ”€ æ£€æŸ¥ slug æ˜¯å¦é‡å¤
   â”œâ”€ prisma.event.create() åˆ›å»ºæ´»åŠ¨
   â””â”€ è¿”å›åˆ›å»ºçš„æ´»åŠ¨

5. è¿”å›ç»™å®¢æˆ·ç«¯
   { success: true, data: { id: "...", title: "æ–°æ´»åŠ¨", ... } }
```

---

## æ•°æ®æ¨¡å‹å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Admin     â”‚ 1     âˆ   â”‚   Event     â”‚ 1     âˆ   â”‚ContentBlock  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id          â”‚           â”‚ id          â”‚           â”‚ id           â”‚
â”‚ email       â”‚           â”‚ title       â”‚           â”‚ type         â”‚
â”‚ password    â”‚           â”‚ slug        â”‚           â”‚ content      â”‚
â”‚ name        â”‚           â”‚ description â”‚           â”‚ orderIndex   â”‚
â”‚ role        â”‚           â”‚ startTime   â”‚           â”‚ eventId  â”€â”€â”€â”€â”¤
â”‚ isActive    â”‚           â”‚ endTime     â”‚           â”‚ createdBy â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ status      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ createdBy â”€â”€â”¤
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸€ä¸ª Admin å¯ä»¥åˆ›å»ºå¤šä¸ª Event
ä¸€ä¸ª Event å¯ä»¥æœ‰å¤šä¸ª ContentBlock
ä¸€ä¸ª Admin ä¹Ÿå¯ä»¥åˆ›å»ºå¤šä¸ª ContentBlock
```

---

## API ç«¯ç‚¹æ€»ç»“

### è®¤è¯ API
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|
| POST | /api/auth/login | ç®¡ç†å‘˜ç™»å½• | âŒ |
| GET | /api/auth/me | è·å–å½“å‰ç”¨æˆ· | âœ… |

### ç®¡ç†å‘˜æ´»åŠ¨ API
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|
| POST | /api/admin/events | åˆ›å»ºæ´»åŠ¨ | âœ… |
| GET | /api/admin/events | è·å–æ´»åŠ¨åˆ—è¡¨ | âœ… |
| GET | /api/admin/events/:id | è·å–æ´»åŠ¨è¯¦æƒ… | âœ… |
| PUT | /api/admin/events/:id | æ›´æ–°æ´»åŠ¨ | âœ… |
| DELETE | /api/admin/events/:id | åˆ é™¤æ´»åŠ¨ | âœ… |
| PUT | /api/admin/events/:id/content-blocks | æ›´æ–°å†…å®¹å— | âœ… |

### å…¬å¼€ API
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|
| GET | /api/events | è·å–å·²å‘å¸ƒæ´»åŠ¨ | âŒ |
| GET | /api/events/:slug | è·å–æ´»åŠ¨è¯¦æƒ… | âŒ |

---

## æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Express.js** - Web æ¡†æ¶
- **Prisma** - ORM (ç±»ä¼¼ Hibernate)
- **PostgreSQL** - æ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **Zod** - æ•°æ®éªŒè¯
- **bcryptjs** - å¯†ç åŠ å¯†
- **TypeScript** - ç±»å‹å®‰å…¨

---

## åˆå§‹ç®¡ç†å‘˜è´¦å·

```
Email: admin@eventsystem.com
Password: admin123
```

---

## å¿«é€Ÿå¯åŠ¨å‘½ä»¤

```bash
# å¯åŠ¨æ•°æ®åº“
docker compose up -d

# è¿è¡Œè¿ç§»
npm run db:migrate --workspace=packages/server

# åˆ›å»ºåˆå§‹ç®¡ç†å‘˜
npm run db:seed --workspace=packages/server

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev --workspace=packages/server
```

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æµ‹è¯•åç«¯ API
- [ ] åˆ›å»ºå‰ç«¯ç™»å½•é¡µé¢
- [ ] åˆ›å»ºæ´»åŠ¨ç®¡ç†é¡µé¢
- [ ] å®ç° Canvas å†…å®¹ç¼–è¾‘å™¨
